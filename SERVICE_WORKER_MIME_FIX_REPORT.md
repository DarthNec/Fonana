# üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã MIME type –¥–ª—è force-update-sw.js

## üìã –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —Å–±–æ—Ä–∫–µ –∏ –¥–µ–ø–ª–æ–µ –ø—Ä–æ–µ–∫—Ç –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π `Refused to execute script from ...force-update-sw.js... because its MIME type ('text/html') is not executable`. –§–∞–π–ª –æ—Ç–¥–∞–≤–∞–ª—Å—è –∫–∞–∫ HTML –≤–º–µ—Å—Ç–æ JavaScript, —á—Ç–æ –ª–æ–º–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫—É feed –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
curl -I https://fonana.me/force-update-sw.js
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Content-Type: text/html; charset=utf-8 ‚ùå
```

### 2. –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã
1. **–§–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –≤ `public/`** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **–§–∞–π–ª –Ω–µ –±—ã–ª –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ git** - –ª–æ–∫–∞–ª—å–Ω–æ –±—ã–ª, –Ω–æ –Ω–µ –ø–æ–ø–∞–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–æ—É—Ç `[username]`** –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª –∑–∞–ø—Ä–æ—Å –∫–∞–∫ username
4. **–û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è** –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ —Ä–æ—É—Ç–∏–Ω–≥–µ

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–∏–Ω–≥–∞
**–§–∞–π–ª:** `app/[username]/page.tsx`
```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
if (username.includes('.') || 
    username === 'force-update-sw.js' || 
    username === 'force-refresh.js' ||
    username === 'sw.js' ||
    username === 'manifest.json') {
  notFound()
  return
}
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ git
```bash
git add public/force-update-sw.js
git commit -m "add: force-update-sw.js service worker file to public directory"
git push origin main
```

### 3. –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
```bash
./deploy-to-production.sh
ssh -p 43988 root@69.10.59.234 "pm2 restart fonana"
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
curl -I https://fonana.me/force-update-sw.js
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Content-Type: application/javascript; charset=UTF-8 ‚úÖ

curl https://fonana.me/force-update-sw.js | head -5
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JavaScript –∫–æ–¥ ‚úÖ
```

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–í—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è:** ~30 –º–∏–Ω—É—Ç
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–ø–ª–æ–µ–≤:** 3 (—Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏)
- **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** 2
- **–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π:** 4 —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–∞

## üö® –ö–ª—é—á–µ–≤—ã–µ —É—Ä–æ–∫–∏

### 1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–ø–ª–æ—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å `git status` –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
- ‚úÖ –£–±–µ–∂–¥–∞—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å PM2 –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å MIME type —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

### 2. –†–∞–±–æ—Ç–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ä–æ—É—Ç–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å `[username]` —Ä–æ—É—Ç–æ–º
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å MIME type –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã `AI_CHAT_INSTRUCTIONS.md` —Å –ø–æ–ª–Ω—ã–º —á–µ–∫-–ª–∏—Å—Ç–æ–º
- ‚úÖ –°–æ–∑–¥–∞–Ω –æ—Ç—á–µ—Ç –æ —Ä–µ—à–µ–Ω–∏–∏
- ‚úÖ –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª force-update-sw.js
```javascript
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Service Worker
// –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–µ—à–∞

console.log('[Force Update] Checking for Service Worker updates...');

if ('serviceWorker' in navigator) {
  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º Service Worker
  navigator.serviceWorker.getRegistrations().then(function(registrations) {
    for(let registration of registrations) {
      registration.update();
    }
  });
}
```

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è –≤ —Ä–æ—É—Ç–∏–Ω–≥–µ
```typescript
// app/[username]/page.tsx
const excludedFiles = [
  'force-update-sw.js',
  'force-refresh.js', 
  'sw.js',
  'manifest.json'
];

if (username.includes('.') || excludedFiles.includes(username)) {
  notFound();
  return;
}
```

## üì± –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- **Feed –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –Ω–µ—Ç –æ—à–∏–±–æ–∫ MIME type
- **Service Worker –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ö–ª–∏–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–∞** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç
2. `force-update-sw.js` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º MIME type
3. Service Worker –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
4. –ö–µ—à –æ—á–∏—â–∞–µ—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
5. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!** 

- ‚úÖ MIME type –∏—Å–ø—Ä–∞–≤–ª–µ–Ω: `application/javascript`
- ‚úÖ –§–∞–π–ª –æ—Ç–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Service Worker —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Feed –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è

### üìã –ß–µ–∫-–ª–∏—Å—Ç –Ω–∞ –±—É–¥—É—â–µ–µ
- [ ] –í—Å–µ —Ñ–∞–π–ª—ã –≤ `public/` –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ git
- [ ] –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–æ—É—Ç—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
- [ ] MIME type –ø—Ä–æ–≤–µ—Ä–µ–Ω –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- [ ] PM2 –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

---
**–î–∞—Ç–∞ —Ä–µ—à–µ–Ω–∏—è:** 01.07.2025  
**–í–µ—Ä—Å–∏—è:** 20250701-133406-0890749  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û 