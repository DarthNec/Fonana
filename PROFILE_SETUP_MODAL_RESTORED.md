# Восстановление модалки настройки профиля

## Дата: 26.12.2024

### Выполненные изменения:

1. **Создан компонент ProfileSetupModal** (`components/ProfileSetupModal.tsx`)
   - Пошаговая форма для настройки профиля (3 шага)
   - Шаг 1: Аватар, никнейм, имя
   - Шаг 2: Био
   - Шаг 3: Социальные ссылки (опционально)
   - Валидация никнейма в реальном времени
   - Поддержка загрузки аватара

2. **Обновлён UserProvider** (`components/UserProvider.tsx`)
   - Добавлено отображение модалки для новых пользователей
   - Интеграция с хуком useUser

3. **Изменена логика API** (`app/api/user/route.ts`)
   - Новые пользователи создаются с пустым профилем
   - Возвращается флаг `isNewUser: true` для пустых профилей
   - Пользователь сам заполняет данные через модалку

4. **Создана тестовая страница** (`app/test/profile-setup/page.tsx`)
   - Для тестирования модалки без необходимости создавать нового пользователя

### Как это работает:

1. При подключении кошелька нового пользователя:
   - Создаётся пользователь с пустым профилем
   - API возвращает `isNewUser: true`
   - Хук useUser устанавливает `showProfileForm: true`
   - UserProvider отображает модалку ProfileSetupModal

2. Пользователь заполняет профиль:
   - Выбирает уникальный никнейм (с валидацией)
   - Загружает аватар (опционально)
   - Заполняет имя и био
   - Добавляет социальные ссылки (опционально)

3. После завершения:
   - Данные сохраняются через updateProfile
   - Модалка закрывается
   - Пользователь может пользоваться платформой

### Особенности:

- Модалка также показывается для пользователей с пустым профилем (после удаления аккаунта)
- Валидация никнейма включает проверку формата и зарезервированных имён
- Поддержка тёмной темы
- Адаптивный дизайн
- Возможность пропустить необязательные шаги

### Статус: ✅ Развёрнуто в продакшен 