# FONANA ARCHITECTURE WEAKNESSES REPORT

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 02.07.2025  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: v1.0  
**–°—Ç–∞—Ç—É—Å**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π - —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. **–ù–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª React Hooks (React #310)**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üî¥ –ö–†–ò–¢–ò–ß–ù–û  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: `lib/hooks/useOptimizedRealtimePosts.tsx:349`

**–û–ø–∏—Å–∞–Ω–∏–µ**: Callback —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–º–µ—â–µ–Ω—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ useEffect, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç React Error #310 –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã.

**–ö–æ–¥ –ø—Ä–æ–±–ª–µ–º—ã**:
```typescript
// lib/hooks/useOptimizedRealtimePosts.tsx:349
}, [user?.id]) // –¢–æ–ª—å–∫–æ user?.id –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö

// lib/hooks/useRealtimePosts.tsx:297
}, [user?.id]) // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

// lib/pricing/PricingProvider.tsx:87
}, [enabled, autoRefresh, refreshInterval, fetchPrices]) // fetchPrices –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
```

**–†–∏—Å–∫–∏**:
- –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
- –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –£–±—Ä–∞—Ç—å –≤—Å–µ callback —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π useEffect
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useCallback —Å –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å useRef –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫

---

### 2. **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å localStorage**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üî¥ –ö–†–ò–¢–ò–ß–ù–û  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ localStorage, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏.

**–ö–æ–¥ –ø—Ä–æ–±–ª–µ–º—ã**:
```typescript
// lib/contexts/UserContext.tsx:99-148
const getCachedUserData = (wallet: string): User | null => {
  try {
    const savedData = localStorage.getItem('fonana_user_data')
    // ... –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
  } catch (e) {
    console.error('[UserContext] Failed to load cached data:', e)
    clearCachedUserData()
  }
  return null
}

// app/post/[id]/page.tsx:227-316 - –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï
const handleLike = async () => {
  if (!user) {
    try {
      const cachedUserData = localStorage.getItem('fonana_user_data')
      // ... —Ç–∞ –∂–µ –ª–æ–≥–∏–∫–∞
    } catch (error) {
      console.error('Error loading cached user for like:', error)
    }
  }
}
```

**–†–∏—Å–∫–∏**:
- –û—à–∏–±–∫–∏ –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ –±—Ä–∞—É–∑–µ—Ä–∞
- –ö–æ—Ä—Ä—É–ø—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∫–µ—à–∞ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π StorageService
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ localStorage
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

---

### 3. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ WebSocket**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üî¥ –ö–†–ò–¢–ò–ß–ù–û  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: WebSocket Service + UserContext + NotificationContext

**–û–ø–∏—Å–∞–Ω–∏–µ**: WebSocket Service –∑–∞–≤–∏—Å–∏—Ç –æ—Ç JWT —Ç–æ–∫–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç UserContext, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç WebSocket —Å–æ–±—ã—Ç–∏–π.

**–°—Ö–µ–º–∞ –ø—Ä–æ–±–ª–µ–º—ã**:
```
WebSocketService ‚Üí getJWTToken() ‚Üí UserContext ‚Üí WebSocket Events ‚Üí WebSocketService
```

**–ö–æ–¥ –ø—Ä–æ–±–ª–µ–º—ã**:
```typescript
// lib/services/websocket.ts:184
private async getWebSocketUrlWithAuth(): Promise<string | null> {
  const token = await getJWTToken() // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç UserContext
  // ...
}

// lib/contexts/NotificationContext.tsx:363
useEffect(() => {
  if (!user?.id) return // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç UserContext
  wsService.subscribeToNotifications(user.id) // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç WebSocket
}, [user?.id])
```

**–†–∏—Å–∫–∏**:
- Deadlock –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –†–∞–∑–æ—Ä–≤–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –í–Ω–µ–¥—Ä–∏—Ç—å Event Bus –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dependency injection

---

## ‚ö†Ô∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –°–õ–ê–ë–û–°–¢–ò

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü° –í–´–°–û–ö–ê–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –í—Å–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã

**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–æ –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –±–µ–∑ —á–µ—Ç–∫–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏**:
- UserContext, NotificationContext, CreatorContext —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –º–µ–∂–¥—É —Ö—É–∫–∞–º–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏

**–†–∏—Å–∫–∏**:
- Race conditions
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏
- –¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –í–Ω–µ–¥—Ä–∏—Ç—å Redux/Zustand –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –°–æ–∑–¥–∞—Ç—å —á–µ—Ç–∫—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

---

### 5. **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü° –í–´–°–û–ö–ê–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –∏ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

**–ö–µ—à–∏—Ä—É—é—â–∏–µ —Å–∏—Å—Ç–µ–º—ã**:
```typescript
// lib/contexts/UserContext.tsx
const CACHE_TTL = 7 * 24 * 60 * 60 * 1000 // 7 –¥–Ω–µ–π

// lib/contexts/CreatorContext.tsx  
const CACHE_TTL = 7 * 24 * 60 * 60 * 1000 // 7 –¥–Ω–µ–π

// lib/pricing/services/cacheService.ts
if (age < PRICING_CONFIG.CACHE.TTL) // 5 –º–∏–Ω—É—Ç

// lib/config/ratesCache.ts
if (Date.now() - ratesCache.lastUpdate > 5 * 60 * 1000) // 5 –º–∏–Ω—É—Ç
```

**–†–∏—Å–∫–∏**:
- –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ localStorage
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–µ—à–∞
- –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π CacheManager
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å TTL —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å LRU eviction
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é

---

### 6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü° –í–´–°–û–ö–ê–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: API —Ö—É–∫–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏, —Å–µ—Ä–≤–µ—Ä–∞ –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏**:
```typescript
// lib/hooks/useOptimizedPosts.ts:167-200
} catch (err: any) {
  if (err.name !== 'AbortError') {
    console.error('Error fetching posts:', err)
    setError(err as Error)
    if (!append) {
      toast.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤')
    }
  }
}

// lib/contexts/UserContext.tsx:150-200
// Retry –ª–æ–≥–∏–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
setTimeout(() => {
  if (connected && publicKey && publicKey.toString() === wallet) {
    createOrGetUser(wallet)
  }
}, 2000)
```

**–†–∏—Å–∫–∏**:
- –ó–∞–≤–∏—Å–∞–Ω–∏–µ UI –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö
- –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ü–ª–æ—Ö–æ–π UX –ø—Ä–∏ —Å–±–æ—è—Ö
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –í–Ω–µ–¥—Ä–∏—Ç—å comprehensive error boundaries
- –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É —Å exponential backoff
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful degradation
- –£–ª—É—á—à–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å

---

## üîÑ –ü–†–û–ë–õ–ï–ú–´ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò

### 7. **Race Conditions –≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü° –í–´–°–û–ö–ê–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ—Ç–µ—Ä–µ —Å–æ–±—ã—Ç–∏–π.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏**:
```typescript
// app/post/[id]/page.tsx:101-139
useEffect(() => {
  if (!contextUser && !user) {
    const checkInterval = setInterval(() => {
      // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ localStorage
    }, 500)
  }
}, [contextUser, user])

// lib/hooks/useOptimizedRealtimePosts.tsx:285-365
useEffect(() => {
  if (!user?.id) return
  wsService.subscribeToFeed(user.id) // WebSocket –ø–æ–¥–ø–∏—Å–∫–∞ –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ user
}, [user?.id])
```

**–†–∏—Å–∫–∏**:
- –ü–æ—Ç–µ—Ä—è WebSocket —Å–æ–±—ã—Ç–∏–π
- –ù–µ–ø–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ë–∞–≥–∏ –≤ UI
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π

---

### 8. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü° –í–´–°–û–ö–ê–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã –∏ WebSocket

**–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏**:
```typescript
// lib/contexts/CreatorContext.tsx:155
// BroadcastChannel —Ç–æ–ª—å–∫–æ –¥–ª—è CreatorContext
if (broadcastChannel) {
  broadcastChannel.postMessage({
    type: 'creator_updated',
    creatorId: id,
    creator: data
  })
}

// UserContext –∏ NotificationContext –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è
// WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ –∫–∞–∂–¥–æ–π –≤–∫–ª–∞–¥–∫–µ
```

**–†–∏—Å–∫–∏**:
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
- –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å UI
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –†–∞—Å—à–∏—Ä–∏—Ç—å BroadcastChannel –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å shared WebSocket connection
- –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è

---

## üéØ –ü–†–û–ë–õ–ï–ú–´ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

### 9. **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ re-renders**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü† –°–†–ï–î–ù–Ø–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ß–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—ã–∑—ã–≤–∞—é—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏**:
```typescript
// lib/hooks/useOptimizedRealtimePosts.tsx:80
const debouncedApplyUpdates = useCallback(
  debounce(() => {
    applyBatchedUpdates()
  }, batchUpdateDelay),
  [applyBatchedUpdates, batchUpdateDelay] // –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã
)

// lib/contexts/NotificationContext.tsx:120
const handleNewNotification = useCallback((event: WebSocketEvent) => {
  setNotifications(prev => [newNotification, ...prev]) // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–±—ã—Ç–∏–∏
  setUnreadCount(prev => prev + 1)
}, [user?.id, lastNotificationId, playNotificationSound])
```

**–†–∏—Å–∫–∏**:
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π UI
- –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ CPU
- –ü–ª–æ—Ö–æ–π UX
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –î–æ–±–∞–≤–∏—Ç—å React.memo –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å useCallback –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –í–Ω–µ–¥—Ä–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤

---

### 10. **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å WebSocket**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü† –°–†–ï–î–ù–Ø–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: WebSocket —Ö—É–∫–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏**:
```typescript
// lib/hooks/useOptimizedRealtimePosts.tsx:285-365
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ö—É–∫–∞
wsService.on('post_liked', handlePostLikedThrottled)
wsService.on('post_unliked', handlePostUnlikedThrottled)
wsService.on('post_created', handlePostCreated)
wsService.on('post_deleted', handlePostDeleted)
wsService.on('comment_added', handleCommentUpdate)
wsService.on('comment_deleted', handleCommentUpdate)
wsService.on('post_purchased', handlePostPurchased)
wsService.on('subscription_updated', handleSubscriptionUpdated)

// lib/contexts/NotificationContext.tsx:363
// –û—Ç–¥–µ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
wsService.subscribeToNotifications(user.id)
```

**–†–∏—Å–∫–∏**:
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–π —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π WebSocket Event Manager
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- –î–æ–±–∞–≤–∏—Ç—å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é —Å–æ–±—ã—Ç–∏–π

---

## üîí –ü–†–û–ë–õ–ï–ú–´ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

### 11. **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–æ–≤**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üî¥ –ö–†–ò–¢–ò–ß–ù–û  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: JWT Manager

**–û–ø–∏—Å–∞–Ω–∏–µ**: JWT —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ localStorage –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã.

**–ö–æ–¥ –ø—Ä–æ–±–ª–µ–º—ã**:
```typescript
// lib/utils/jwt.ts:22-64
private loadFromStorage() {
  try {
    const stored = localStorage.getItem(TOKEN_KEY)
    if (stored) {
      const data = JSON.parse(stored) as StoredToken
      // –ü—Ä—è–º–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
    }
  } catch (error) {
    console.error('[JWT] Error loading token from storage:', error)
  }
}
```

**–†–∏—Å–∫–∏**:
- XSS –∞—Ç–∞–∫–∏
- –ö—Ä–∞–∂–∞ —Ç–æ–∫–µ–Ω–æ–≤
- –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
- –ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –®–∏—Ñ—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å httpOnly cookies –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω rotation

---

### 12. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü° –í–´–°–û–ö–ê–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: API —Ä–æ—É—Ç—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏**:
```typescript
// app/api/posts/[id]/like/route.ts:40
const { userId } = await request.json()
if (!userId) {
  return NextResponse.json(
    { error: 'User ID is required' },
    { status: 400 }
  )
}
// –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞

// lib/contexts/UserContext.tsx:150
const createOrGetUser = async (wallet: string) => {
  // –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ wallet –∞–¥—Ä–µ—Å–∞
}
```

**–†–∏—Å–∫–∏**:
- SQL –∏–Ω—ä–µ–∫—Ü–∏–∏
- XSS –∞—Ç–∞–∫–∏
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
- –ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –í–Ω–µ–¥—Ä–∏—Ç—å Zod –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ö–µ–º
- –î–æ–±–∞–≤–∏—Ç—å sanitization –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å rate limiting
- –î–æ–±–∞–≤–∏—Ç—å CORS –ø–æ–ª–∏—Ç–∏–∫–∏

---

## üìà –ü–†–û–ë–õ–ï–ú–´ –ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û–°–¢–ò

### 13. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü† –°–†–ï–î–ù–Ø–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–û–ø–∏—Å–∞–Ω–∏–µ**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–æ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –±–µ–∑ –µ–¥–∏–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏**:
```typescript
// lib/contexts/UserContext.tsx:99-148
console.log('[UserContext] Restored user data from cache')
console.error('[UserContext] Failed to load cached data:', e)

// lib/services/websocket.ts:73-184
console.log('WebSocket connected')
console.error('WebSocket error:', error)

// –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–†–∏—Å–∫–∏**:
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –ü–æ—Ç–µ—Ä—è –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ª–æ–≥–æ–≤
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –í–Ω–µ–¥—Ä–∏—Ç—å Winston –∏–ª–∏ Pino
- –î–æ–±–∞–≤–∏—Ç—å structured logging
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å log levels
- –î–æ–±–∞–≤–∏—Ç—å correlation IDs

---

### 14. **–ñ–µ—Å—Ç–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: üü† –°–†–ï–î–ù–Ø–Ø  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–û–ø–∏—Å–∞–Ω–∏–µ**: –í—ã—Å–æ–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥.

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏**:
- UserContext –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- WebSocket Service –Ω–∞–ø—Ä—è–º—É—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Ö—É–∫–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ dependency injection
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

**–†–∏—Å–∫–∏**:
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –•—Ä—É–ø–∫–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
- –í—ã—Å–æ–∫–∞—è —Ü–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
- –í–Ω–µ–¥—Ä–∏—Ç—å dependency injection
- –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å –º–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤ —Å—Ç–æ—Ä–æ–Ω—É loose coupling

---

## üìä –ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|------------------|------------------|---------|
| –¶–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å | >10 (–∫—Ä–∏—Ç–∏—á–Ω–æ) | <5 | üî¥ |
| –°–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è | üî¥ |
| –°–≤—è–∑–Ω–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | üü° |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | üî¥ |
| –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | üü° |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | üî¥ |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | üü° |

---

## üéØ –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è React Hooks**
   - –£–±—Ä–∞—Ç—å callback —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π useEffect
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å useCallback —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
   - –î–æ–±–∞–≤–∏—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è

2. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å localStorage**
   - –°–æ–∑–¥–∞—Ç—å StorageService —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
   - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
   - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

3. **–†–∞–∑–æ—Ä–≤–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ WebSocket –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
   - –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Event Bus
   - Dependency injection

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í—ã—Å–æ–∫–∏–π - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏):

4. **–í–Ω–µ–¥—Ä–∏—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**
   - Redux Toolkit –∏–ª–∏ Zustand
   - –ï–¥–∏–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π
   - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API

5. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –ï–¥–∏–Ω—ã–π CacheManager
   - LRU eviction
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è

6. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤**
   - Error boundaries
   - Retry –ª–æ–≥–∏–∫–∞ —Å exponential backoff
   - Graceful degradation

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–°—Ä–µ–¥–Ω–∏–π - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞):

7. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - React.memo –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è re-renders

8. **–£–ª—É—á—à–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–æ–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - Rate limiting

9. **–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Structured logging
   - Log levels
   - Correlation IDs

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4 (–ù–∏–∑–∫–∏–π - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–≤–∞—Ä—Ç–∞–ª–∞):

10. **–£–ª—É—á—à–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**
    - Dependency injection
    - –ú–æ–∫–∏ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
    - Unit —Ç–µ—Å—Ç—ã

11. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
    - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    - Health checks
    - Alerting

12. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å API**
    - OpenAPI/Swagger
    - TypeScript —Ç–∏–ø—ã
    - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üöÄ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Fonana –∏–º–µ–µ—Ç **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**, —Ç—Ä–µ–±—É—é—â–∏–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è. –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏ —Å–≤—è–∑–∞–Ω—ã —Å:

- **–ù–∞—Ä—É—à–µ–Ω–∏—è–º–∏ –ø—Ä–∞–≤–∏–ª React Hooks** (React #310)
- **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π —Å localStorage**
- **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –≤ WebSocket**
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**:
1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
2. –í–Ω–µ–¥—Ä–∏—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
3. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
4. –£–ª—É—á—à–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ë–µ–∑ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω–æ —Ä–∏—Å–∫–∞–º –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏, —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–æ–±–ª–µ–º —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é.

---

**–ê–≤—Ç–æ—Ä –æ—Ç—á–µ—Ç–∞**: AI Assistant  
**–î–∞—Ç–∞**: 02.07.2025  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: –¢—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è 