# üîç DISCOVERY REPORT: Profile System Expansion

**–î–∞—Ç–∞**: 17 –∏—é–ª—è 2025  
**ID –∑–∞–¥–∞—á–∏**: [profile_system_expansion_2025_017]  
**–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è**: Ideal Methodology M7 + Playwright MCP + Context7 MCP

## üìã –ó–ê–î–ê–ß–ê

–†–∞—Å—à–∏—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –ø—Ä–æ—Ñ–∏–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É CreatorPageClient —Å 5 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏:

1. **Edit Profile —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤ –∫–Ω–æ–ø–∫—É Edit Profile
2. **Posts Feed** - –ø–æ–¥—Ç—è–Ω—É—Ç—å –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π + –º–µ–¥–∏–∞-—Ç–∞–±–∫–∞  
3. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏** - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è
4. **Background duplication** - –ø—Ä–æ–¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –±—ç–∫–≥—Ä–∞—É–Ω–¥ –Ω–∞ –ø–ª–∞—à–∫—É —Å –∞–≤–∞—Ç–∞—Ä–æ–º
5. **–†–µ–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–¥—Ç—è–Ω—É—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

## üé≠ PLAYWRIGHT MCP –ò–°–°–õ–ï–î–û–í–ê–ù–ò–ï

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ CreatorPageClient:
‚úÖ **–£—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**: `/octanedreams` ‚Üí `/creator/cmbvtqy84000gqowpvlo2r5tp`

**Browser Evidence**:
- Background image: –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
- Creator info: OctaneDreams, @octanedreams, –ø–æ–ª–Ω–æ–µ bio
- Statistics: 0 Followers, 33 Posts, 0 Following ‚úÖ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –ë–î)
- Actions: Subscribe/Share –∫–Ω–æ–ø–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
- **Posts section**: "Posts Coming Soon" placeholder

### –ü—Ä–æ–±–ª–µ–º—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã:
‚ùå **Edit Profile –∫–Ω–æ–ø–∫–∞**: –°—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ `/profile` –Ω–æ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
‚ùå **Posts –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è**: –¢–æ–ª—å–∫–æ placeholder –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö 33 –ø–æ—Å—Ç–æ–≤
‚ùå **–ú–µ–¥–∏–∞-—Ç–∞–±–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**: –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞

## üîß –ö–û–ù–¢–ï–ö–°–¢–ù–´–ï –°–ò–°–¢–ï–ú–´ –ò–°–°–õ–ï–î–û–í–ê–ù–ò–ï

### 1. API Endpoints –¥–ª—è –ø–æ—Å—Ç–æ–≤:
**–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ API**:
- `GET /api/posts?creatorId={id}` ‚úÖ - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞—Ç–µ–ª—é
- `GET /api/posts?category={cat}` ‚úÖ - –ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è  
- `GET /api/creators/{id}` ‚úÖ - –î–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—Ç–µ–ª—è —Å –ø–æ–ª–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

### 2. Hooks –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞–º–∏:
**–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è**:
- `useOptimizedPosts({creatorId})` ‚úÖ - –ì–æ—Ç–æ–≤—ã–π —Ö—É–∫ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –∫—Ä–µ–∞—Ç–æ—Ä–∞
- `useUnifiedPosts({creatorId})` ‚úÖ - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç–æ–≤
- `PostNormalizer.normalizeMany()` ‚úÖ - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### 3. Edit Profile —Å–∏—Å—Ç–µ–º–∞:
**–ù–∞–π–¥–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**:
- `updateUserProfile()` –≤ `lib/db.ts` ‚úÖ - Backend –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `PUT /api/user` ‚úÖ - API endpoint –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- `ProfileSetupModal` ‚úÖ - –ì–æ—Ç–æ–≤—ã–π UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `useAppStore.updateProfile()` ‚úÖ - Store method –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 4. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
**–°–∏—Å—Ç–µ–º–∞ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
- `getProfileLink()` –≤ `lib/utils/links.ts` ‚úÖ - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- `middleware.ts` ‚úÖ - –û–±—Ä–∞–±–æ—Ç–∫–∞ `/username` ‚Üí `/creator/id`
- `UserProfileShortcutClient` ‚úÖ - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Å—ã–ª–∫–∏

## üí° –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –†–ï–®–ï–ù–ò–Ø

### –ê. Direct API Integration Approach
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API endpoints
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ö—É–∫–∏
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏

### –ë. Hook-Based Integration Approach ‚≠ê **–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô**
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `useOptimizedPosts`
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- –í–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

### –í. Modal-Based Edit Profile ‚≠ê **–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô**
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ProfileSetupModal` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è UX —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π
- –ì–æ—Ç–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∞—Ü–∏—é –º–æ–¥–∞–ª–∫–∏

## üîó –ò–ù–¢–ï–ì–†–ê–¶–ò–û–ù–ù–´–ï –¢–û–ß–ö–ò

### 1. Posts Feed Integration:
```typescript
// –í CreatorPageClient
const { posts, loading } = useOptimizedPosts({ 
  creatorId, 
  category: selectedCategory 
})

// –¢–∞–±–∫–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
const tabs = ['All', 'Media', 'Text', 'Video', 'Audio']
```

### 2. Edit Profile Integration:
```typescript
// Owner detection
const isOwner = user?.id === creatorId

// Modal trigger
const [showEditModal, setShowEditModal] = useState(false)

// ProfileSetupModal —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
<ProfileSetupModal 
  isOpen={showEditModal}
  initialData={creatorData}
  mode="edit"
/>
```

### 3. Statistics Integration:
```typescript
// Real-time statistics –∏–∑ API
const stats = {
  followers: creatorData.followersCount,
  posts: creatorData.postsCount, 
  following: creatorData.followingCount
}
```

### 4. Custom Links Integration:
```typescript
// Link customization UI
const [customLink, setCustomLink] = useState(creator.nickname)

// API call –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è nickname
await updateProfile({ nickname: customLink })
```

## üé® UI/UX –ü–ê–¢–¢–ï–†–ù–´

### Media Tab Implementation:
```typescript
const filterMediaPosts = (posts: UnifiedPost[]) => 
  posts.filter(post => 
    post.type === 'image' || 
    post.type === 'video' || 
    post.type === 'audio'
  )
```

### Background Duplication:
```typescript
// CSS background –Ω–∞ header –ø–ª–∞—à–∫—É
style={{
  backgroundImage: `url(${creator.backgroundImage})`,
  backgroundSize: 'cover',
  backgroundPosition: 'center'
}}
```

## üìä –ì–û–¢–û–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

**–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
- `PostCard` ‚úÖ - –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤
- `PostGrid` ‚úÖ - –°–µ—Ç–∫–∞ –ø–æ—Å—Ç–æ–≤ 
- `ProfileSetupModal` ‚úÖ - –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- `useOptimizedPosts` ‚úÖ - –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤
- `TabNavigation` ‚úÖ - –°–∏—Å—Ç–µ–º–∞ —Ç–∞–±–æ–∫

**–¢—Ä–µ–±—É—é—Ç —Å–æ–∑–¥–∞–Ω–∏—è**:
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∞–±–∫–∏ –¥–ª—è –º–µ–¥–∏–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- UI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- Background integration –≤ header

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –í–ê–õ–ò–î–ê–¶–ò–Ø

### Edit Profile Security:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `isOwner` –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –∫–Ω–æ–ø–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è nickname –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å  
- –ó–∞—â–∏—Ç–∞ API endpoints —á–µ—Ä–µ–∑ JWT

### Custom Links Validation:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ nickname `/^[a-zA-Z0-9_-]+$/`
- Case-insensitive uniqueness check
- Reserved names protection

## üöÄ –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### Performance:
- Lazy loading –¥–ª—è –ø–æ—Å—Ç–æ–≤ (pagination)
- Image optimization –¥–ª—è –º–µ–¥–∏–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ API responses

### Compatibility:
- Responsive design –¥–ª—è —Ç–∞–±–æ–∫
- Mobile-friendly edit modal
- Backward compatibility —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

## ‚úÖ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

**–í—ã—Å–æ–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**:
1. ‚úÖ Posts API —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `creatorId` —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
2. ‚úÖ Hooks –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
3. ‚úÖ Edit Profile backend –≥–æ—Ç–æ–≤
4. ‚úÖ Statistics API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–¢—Ä–µ–±—É–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**:
1. ‚ö†Ô∏è –ú–µ–¥–∏–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è UI
2. ‚ö†Ô∏è Custom links —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI  
3. ‚ö†Ô∏è Background duplication implementation

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **ARCHITECTURE_CONTEXT.md** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫
2. **SOLUTION_PLAN.md** - –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ —Ñ–∞–∑–∞–º
3. **IMPACT_ANALYSIS.md** - –û—Ü–µ–Ω–∫–∞ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É
4. **Playwright MCP validation** - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–π —Ñ–∏—á–∏

–í—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ–∞–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. 