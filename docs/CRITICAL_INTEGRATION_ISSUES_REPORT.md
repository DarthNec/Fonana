# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò - –û–¢–ß–ï–¢

## üìä –°—Ç–∞—Ç—É—Å: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –û–ë–ù–ê–†–£–ñ–ï–ù–´

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: WebSocketEventManager –ù–ï –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–ï –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: 
- `lib/hooks/useRealtimePosts.tsx` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `wsService.on()`
- `lib/hooks/useOptimizedRealtimePosts.tsx` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `wsService.on()`
- `lib/services/websocket-client.ts` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `wsService.emit()`

**–ü—Ä–æ–±–ª–µ–º–∞**: WebSocketEventManager —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ.

**–†–µ—à–µ–Ω–∏–µ**: 
1. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `wsService.on()` –Ω–∞ `setupDefaultHandlers()`
2. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `wsService.emit()` –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ EventManager
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ AppProvider

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: CacheManager –ù–ï –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–ï –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**:
- `app/post/[id]/page.tsx` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `localStorage.getItem()`
- `lib/hooks/useUnifiedPosts.ts` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `localStorage.getItem()`
- `lib/hooks/useOptimizedPosts.ts` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `localStorage.getItem()`
- `components/ReferralNotification.tsx` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `localStorage.getItem()`

**–ü—Ä–æ–±–ª–µ–º–∞**: CacheManager —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ.

**–†–µ—à–µ–Ω–∏–µ**:
1. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `localStorage.getItem()` –Ω–∞ `cacheManager.get()`
2. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `localStorage.setItem()` –Ω–∞ `cacheManager.set()`
3. –î–æ–±–∞–≤–∏—Ç—å TTL –ª–æ–≥–∏–∫—É

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 3: Retry –ª–æ–≥–∏–∫–∞ –ù–ï –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞

**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–ï –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–ê  
**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**:
- –í—Å–µ API –≤—ã–∑–æ–≤—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `retry()`
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –∏–º–µ—é—Ç fallback –ª–æ–≥–∏–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: Retry –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ.

**–†–µ—à–µ–Ω–∏–µ**:
1. –û–±–µ—Ä–Ω—É—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ API –≤—ã–∑–æ–≤—ã –≤ `retry()`
2. –î–æ–±–∞–≤–∏—Ç—å `retryWithToast()` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful degradation

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ô–õ–´ –¢–†–ï–ë–£–Æ–¢ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### WebSocketEventManager
- [ ] `lib/hooks/useRealtimePosts.tsx`
- [ ] `lib/hooks/useOptimizedRealtimePosts.tsx`
- [ ] `lib/services/websocket-client.ts`
- [ ] `lib/providers/AppProvider.tsx`

### CacheManager
- [ ] `app/post/[id]/page.tsx`
- [ ] `lib/hooks/useUnifiedPosts.ts`
- [ ] `lib/hooks/useOptimizedPosts.ts`
- [ ] `components/ReferralNotification.tsx`
- [ ] `components/SubscriptionManager.tsx`

### Retry –ª–æ–≥–∏–∫–∞
- [ ] `lib/hooks/useUnifiedPosts.ts` - API –≤—ã–∑–æ–≤—ã
- [ ] `lib/hooks/useOptimizedPosts.ts` - API –≤—ã–∑–æ–≤—ã
- [ ] `app/post/[id]/page.tsx` - API –≤—ã–∑–æ–≤—ã
- [ ] `components/SellablePostModal.tsx` - API –≤—ã–∑–æ–≤—ã

## üìã –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –≠—Ç–∞–ø 1: WebSocketEventManager (–ö–†–ò–¢–ò–ß–ù–û)
1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `useRealtimePosts.tsx`
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `useOptimizedRealtimePosts.tsx`
3. –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `websocket-client.ts`
4. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤ `AppProvider.tsx`

### –≠—Ç–∞–ø 2: CacheManager (–ö–†–ò–¢–ò–ß–ù–û)
1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
2. –î–æ–±–∞–≤–∏—Ç—å TTL –ª–æ–≥–∏–∫—É
3. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã localStorage

### –≠—Ç–∞–ø 3: Retry –ª–æ–≥–∏–∫–∞ (–í–ê–ñ–ù–û)
1. –û–±–µ—Ä–Ω—É—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ API –≤—ã–∑–æ–≤—ã
2. –î–æ–±–∞–≤–∏—Ç—å toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å fallback –ª–æ–≥–∏–∫—É

## üéØ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

### WebSocketEventManager
- [ ] –ù–µ—Ç –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `wsService.emit()` –≤ UI
- [ ] –ù–µ—Ç –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `wsService.on()` –≤ —Ö—É–∫–∞—Ö
- [ ] –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ EventManager
- [ ] –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –≤ AppProvider

### CacheManager
- [ ] –ù–µ—Ç –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `localStorage.getItem()`
- [ ] –ù–µ—Ç –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `localStorage.setItem()`
- [ ] –í—Å–µ –∫–µ—à–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ CacheManager
- [ ] TTL –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### Retry –ª–æ–≥–∏–∫–∞
- [ ] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ API –≤—ã–∑–æ–≤—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ `retry()`
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `retryWithToast()`
- [ ] Graceful degradation —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üö® –ü–†–ò–û–†–ò–¢–ï–¢–´

1. **WebSocketEventManager** - –ö–†–ò–¢–ò–ß–ù–û (–≤–ª–∏—è–µ—Ç –Ω–∞ real-time —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
2. **CacheManager** - –ö–†–ò–¢–ò–ß–ù–û (–≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
3. **Retry –ª–æ–≥–∏–∫–∞** - –í–ê–ñ–ù–û (–≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å)

## üìä –ú–ï–¢–†–ò–ö–ò

### –î–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
- **WebSocket**: 15+ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- **localStorage**: 25+ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- **API –≤—ã–∑–æ–≤—ã**: 0 —Å retry –ª–æ–≥–∏–∫–æ–π

### –ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (—Ü–µ–ª—å):
- **WebSocket**: 0 –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- **localStorage**: 0 –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- **API –≤—ã–∑–æ–≤—ã**: 100% —Å retry –ª–æ–≥–∏–∫–æ–π

---

**–°—Ç–∞—Ç—É—Å**: üö® –¢–†–ï–ë–£–ï–¢ –ù–ï–ú–ï–î–õ–ï–ù–ù–û–ì–û –í–ù–ò–ú–ê–ù–ò–Ø  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WebSocketEventManager  
**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è**: 2-3 —á–∞—Å–∞ –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ 