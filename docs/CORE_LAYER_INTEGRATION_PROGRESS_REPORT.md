# üß± –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Å–ª–æ—ë–≤

## üìä –°—Ç–∞—Ç—É—Å: –ß–ê–°–¢–ò–ß–ù–û –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û

### ‚úÖ –≠—Ç–∞–ø 1: WebSocketEventManager - –ß–ê–°–¢–ò–ß–ù–û –ó–ê–í–ï–†–®–ï–ù

#### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `lib/hooks/useRealtimePosts.tsx`
  - –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `wsService.on()` –Ω–∞ `setupDefaultHandlers()`
  - –£–¥–∞–ª–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `wsService.off()`
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `emitPostLiked`, `emitPostCommented`

- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `lib/hooks/useOptimizedRealtimePosts.tsx`
  - –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `wsService.on()` –Ω–∞ `setupDefaultHandlers()`
  - –£–¥–∞–ª–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `wsService.off()`
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π EventManager

- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `lib/services/websocket-client.ts`
  - –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `wsService.emit()` –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ EventManager
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `emitNotification` –≤ WebSocketEventManager
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `sendNotification`, `updatePostLikes`, `notifyNewComment`

#### ‚ùå –û—Å—Ç–∞–ª–æ—Å—å:
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `lib/providers/AppProvider.tsx`
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ EventManager

### ‚ö†Ô∏è –≠—Ç–∞–ø 2: CacheManager - –ß–ê–°–¢–ò–ß–ù–û –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù

#### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
- [x] –ù–∞—á–∞—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `lib/hooks/useUnifiedPosts.ts`
  - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—ã–∑–æ–≤—ã `localStorage.getItem()` –Ω–∞ `cacheManager.get()`
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç CacheManager

- [x] –ù–∞—á–∞—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `lib/hooks/useOptimizedPosts.ts`
  - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—ã–∑–æ–≤—ã `localStorage.getItem()` –Ω–∞ `cacheManager.get()`
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç CacheManager

#### ‚ùå –û—Å—Ç–∞–ª–æ—Å—å:
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –≤ CacheManager
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `app/post/[id]/page.tsx`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `components/ReferralNotification.tsx`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `components/SubscriptionManager.tsx`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ TTL –ª–æ–≥–∏–∫–∏

### ‚ö†Ô∏è –≠—Ç–∞–ø 3: Retry –ª–æ–≥–∏–∫–∞ - –ß–ê–°–¢–ò–ß–ù–û –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–ê

#### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
- [x] –ù–∞—á–∞—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `lib/hooks/useUnifiedPosts.ts`
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `useRetry`
  - –î–æ–±–∞–≤–ª–µ–Ω —Ö—É–∫ `retryWithToast`
  - –ù–∞—á–∞—Ç–∞ –æ–±–µ—Ä—Ç–∫–∞ API –≤—ã–∑–æ–≤–æ–≤ –≤ retry –ª–æ–≥–∏–∫—É

#### ‚ùå –û—Å—Ç–∞–ª–æ—Å—å:
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –≤ retry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `lib/hooks/useOptimizedPosts.ts`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `app/post/[id]/page.tsx`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `components/SellablePostModal.tsx`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ retry –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö API –≤—ã–∑–æ–≤–æ–≤

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. –û—à–∏–±–∫–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- **CacheManager**: `Argument of type '{}' is not assignable to parameter of type 'string'`
- **Retry –ª–æ–≥–∏–∫–∞**: –û—à–∏–±–∫–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **WebSocketEventManager**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã

### 2. –ù–µ–ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **WebSocketEventManager**: –ù–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ AppProvider
- **CacheManager**: –ù–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Retry –ª–æ–≥–∏–∫–∞**: –ù–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ API –≤—ã–∑–æ–≤—ã

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é CacheManager**
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É retry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
3. **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —ç–∫—Å–ø–æ—Ä—Ç—ã –≤ WebSocketEventManager**

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
1. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å WebSocketEventManager –≤ AppProvider**
2. **–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é CacheManager –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
3. **–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é retry –ª–æ–≥–∏–∫–∏ –≤ API –≤—ã–∑–æ–≤—ã**

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É real-time —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è**
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É retry –º–µ—Ö–∞–Ω–∏–∑–º–∞**

## üìä –ú–ï–¢–†–ò–ö–ò –ü–†–û–ì–†–ï–°–°–ê

### WebSocketEventManager
- **–î–æ**: 15+ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `wsService.emit/on`
- **–ü–æ—Å–ª–µ**: 5 –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (–≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞—Ö)
- **–ü—Ä–æ–≥—Ä–µ—Å—Å**: 67% –∑–∞–≤–µ—Ä—à–µ–Ω–æ

### CacheManager
- **–î–æ**: 25+ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `localStorage.getItem/setItem`
- **–ü–æ—Å–ª–µ**: 20+ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- **–ü—Ä–æ–≥—Ä–µ—Å—Å**: 20% –∑–∞–≤–µ—Ä—à–µ–Ω–æ

### Retry –ª–æ–≥–∏–∫–∞
- **–î–æ**: 0 API –≤—ã–∑–æ–≤–æ–≤ —Å retry
- **–ü–æ—Å–ª–µ**: 1 API –≤—ã–∑–æ–≤ —Å retry
- **–ü—Ä–æ–≥—Ä–µ—Å—Å**: 5% –∑–∞–≤–µ—Ä—à–µ–Ω–æ

## üéØ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

### WebSocketEventManager
- [x] ‚úÖ –ù–µ—Ç –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `wsService.emit()` –≤ UI
- [x] ‚úÖ –ù–µ—Ç –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `wsService.on()` –≤ —Ö—É–∫–∞—Ö
- [ ] ‚ùå –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ EventManager
- [ ] ‚ùå –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –≤ AppProvider

### CacheManager
- [ ] ‚ùå –ù–µ—Ç –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `localStorage.getItem()`
- [ ] ‚ùå –ù–µ—Ç –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `localStorage.setItem()`
- [ ] ‚ùå –í—Å–µ –∫–µ—à–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ CacheManager
- [ ] ‚ùå TTL –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### Retry –ª–æ–≥–∏–∫–∞
- [ ] ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ API –≤—ã–∑–æ–≤—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ `retry()`
- [ ] ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `retryWithToast()`
- [ ] ‚ùå Graceful degradation —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] ‚ùå –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìà –û–ë–©–ò–ô –ü–†–û–ì–†–ï–°–°

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: 30% –∑–∞–≤–µ—Ä—à–µ–Ω–æ  
**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏  
**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 1-2 —á–∞—Å–∞

---

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –û–®–ò–ë–û–ö  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ 