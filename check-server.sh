#!/bin/bash

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É Fonana

SERVER="69.10.59.234"
SSH_PORT="43988"

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É Fonana"
echo "üìç IP –∞–¥—Ä–µ—Å: $SERVER"
echo "üîå SSH –ø–æ—Ä—Ç: $SSH_PORT"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ping
echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ (ping)..."
if ping -c 1 -W 2 $SERVER > /dev/null 2>&1; then
    echo "‚úÖ –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω"
else
    echo "‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ ping"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP
echo ""
echo "2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞..."
if curl -s -o /dev/null -w "%{http_code}" http://$SERVER | grep -q "200\|301\|302"; then
    echo "‚úÖ –í–µ–±-—Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç"
    echo "üåê –°–∞–π—Ç: http://$SERVER"
else
    echo "‚ö†Ô∏è  –í–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –ø–æ—Ä—Ç–∞
echo ""
echo "3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –ø–æ—Ä—Ç–∞..."
if nc -z -w 2 $SERVER $SSH_PORT 2>/dev/null; then
    echo "‚úÖ SSH –ø–æ—Ä—Ç $SSH_PORT –æ—Ç–∫—Ä—ã—Ç"
else
    echo "‚ùå SSH –ø–æ—Ä—Ç $SSH_PORT –∑–∞–∫—Ä—ã—Ç –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
fi

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ SSH
echo ""
echo "4Ô∏è‚É£ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."
echo "–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:"
echo "  ssh -p $SSH_PORT root@$SERVER"
echo ""
echo "–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç SSH –∫–ª—é—á–∞:"
echo "1. –°–æ–∑–¥–∞–π—Ç–µ SSH –∫–ª—é—á: ssh-keygen -t ed25519"
echo "2. –î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä"
echo "3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)"
echo ""
echo "–î–ª—è –¥–µ–ø–ª–æ—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ:"
echo "  ./deploy-to-server.sh root@$SERVER" 