# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö –ø–æ—Å—Ç–æ–≤

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∞–≤—Ç–æ—Ä–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ –ø–æ–∫—É–ø–∞–µ–º—ã–µ –ø–æ—Å—Ç—ã —á–µ—Ä–µ–∑ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ü–µ–Ω—É –∏–ª–∏ –∞—É–∫—Ü–∏–æ–Ω. –ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –ø–æ—Å—Ç –æ—Å—Ç–∞–µ—Ç—Å—è –≤–∏–¥–∏–º—ã–º, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–º–µ—Ç–∫—É "–ü–†–û–î–ê–ù–û" —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ–∫—É–ø–∞—Ç–µ–ª—è.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Prisma)

#### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å Post:
```prisma
model Post {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  
  // –ü–æ–ª—è –¥–ª—è –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö –ø–æ—Å—Ç–æ–≤
  isSellable        Boolean   @default(false)
  sellType          SellType? // FIXED_PRICE –∏–ª–∏ AUCTION
  auctionStartPrice Float?
  auctionStepPrice  Float?
  auctionDepositAmount Float?  @default(0.01) // –ó–∞–ª–æ–≥ –¥–ª—è —É—á–∞—Å—Ç–∏—è
  auctionStartAt    DateTime?
  auctionEndAt      DateTime?
  auctionStatus     AuctionStatus @default(DRAFT)
  
  // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥–∞–∂–µ
  soldAt            DateTime?
  soldToId          String?
  soldTo            User?     @relation("PurchasedSellablePosts")
  soldPrice         Float?
  sellerConfirmedAt DateTime? // –ö–æ–≥–¥–∞ –ø—Ä–æ–¥–∞–≤–µ—Ü –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø—Ä–æ–¥–∞–∂—É
  
  // –°–≤—è–∑–∏
  auctionDeposits   AuctionDeposit[]
  auctionBids       AuctionBid[]
  auctionPayment    AuctionPayment?
  
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  quantity          Int?      @default(1)  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
}
```

#### –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏:
- **AuctionDeposit** - –∑–∞–ª–æ–≥–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∞—É–∫—Ü–∏–æ–Ω–∞
- **AuctionBid** - —Å—Ç–∞–≤–∫–∏ –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω–µ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã)
- **AuctionPayment** - –æ–ø–ª–∞—Ç–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –∞—É–∫—Ü–∏–æ–Ω–∞

### 2. API Endpoints

#### POST /api/posts/[id]/buy
–ü–æ–∫—É–ø–∫–∞ –ø–æ—Å—Ç–∞ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω–æ–π:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å—Ç–∞ –Ω–∞ "–ü–†–û–î–ê–ù–û"
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü—É

#### POST /api/posts/[id]/auction/deposit
–í–Ω–µ—Å–µ–Ω–∏–µ –∑–∞–ª–æ–≥–∞ –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ –∞—É–∫—Ü–∏–æ–Ω–µ (–±—É–¥—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

#### POST /api/posts/[id]/auction/bid
–†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω–µ (–±—É–¥—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

### 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI

#### CreatePostModal
–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–°–¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã–º":
- –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø—Ä–æ–¥–∞–∂–∏ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞ / –∞—É–∫—Ü–∏–æ–Ω)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∞—É–∫—Ü–∏–æ–Ω–∞ (–Ω–∞—á–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞, —à–∞–≥, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∑–∞–ª–æ–≥)
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞

#### PostCard
–û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
- –ë–µ–π–¥–∂–µ–π –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö –ø–æ—Å—Ç–æ–≤
- –°—Ç–∞—Ç—É—Å–∞ –∞—É–∫—Ü–∏–æ–Ω–∞ —Å —Ç–∞–π–º–µ—Ä–æ–º
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–¥–∞–∂–µ
- –ö–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π (–∫—É–ø–∏—Ç—å/—Å–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ (–µ—Å–ª–∏ –±–æ–ª—å—à–µ 1)

#### SellablePostModal
–ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è:
- –ü–æ–∫—É–ø–∫–∏ –ø–æ—Å—Ç–æ–≤ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω–æ–π
- –£—á–∞—Å—Ç–∏—è –≤ –∞—É–∫—Ü–∏–æ–Ω–∞—Ö (UI –≥–æ—Ç–æ–≤, –ª–æ–≥–∏–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ –∞—É–∫—Ü–∏–æ–Ω–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ó–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞—É–∫—Ü–∏–æ–Ω–æ–≤
–í–º–µ—Å—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ —Å—Ç–∞–≤–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ª–æ–≥–æ–≤:
1. –£—á–∞—Å—Ç–Ω–∏–∫ –ø–ª–∞—Ç–∏—Ç –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–ª–æ–≥ (0.01 SOL –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. –î–µ–ª–∞–µ—Ç —Å—Ç–∞–≤–∫–∏ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
3. –ü–æ–±–µ–¥–∏—Ç–µ–ª—å –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é —Å—É–º–º—É –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è
4. –ü—Ä–∏ –Ω–µ–æ–ø–ª–∞—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞:
   - –ó–∞–ª–æ–≥ –∫–æ–Ω—Ñ–∏—Å–∫—É–µ—Ç—Å—è
   - –ü–æ–±–µ–¥–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É
5. –ü—Ä–æ–¥–∞–≤–µ—Ü –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø—Ä–∏–µ–º–ª–µ–º–æ—Å—Ç—å —Ü–µ–Ω—ã

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- üõí - –ø–æ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø–æ–∫—É–ø–∫–∏
- üïí - –∞–∫—Ç–∏–≤–Ω—ã–π –∞—É–∫—Ü–∏–æ–Ω
- ‚úÖ - –ø–æ—Å—Ç –ø—Ä–æ–¥–∞–Ω

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–≤–∞–µ–º–æ–≥–æ –ø–æ—Å—Ç–∞
1. –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞
2. –û—Ç–º–µ—Ç–∏—Ç—å —á–µ–∫–±–æ–∫—Å "–°–¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã–º"
3. –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø –ø—Ä–æ–¥–∞–∂–∏
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
5. –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç

### –ü–æ–∫—É–ø–∫–∞ –ø–æ—Å—Ç–∞
1. –ù–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "–ö—É–ø–∏—Ç—å" –Ω–∞ –ø–æ—Å—Ç–µ
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ –∫–æ—à–µ–ª—å–∫–µ
3. –î–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
```bash
node scripts/test-sellable-posts.js
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- –ü–æ—Å—Ç —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω–æ–π (5 SOL)
- –ê–∫—Ç–∏–≤–Ω—ã–π –∞—É–∫—Ü–∏–æ–Ω (–Ω–∞—á–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ 1 SOL)
- –ü—Ä–æ–¥–∞–Ω–Ω—ã–π –ø–æ—Å—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–∫—Ü–∏–æ–Ω–æ–≤**:
   - API –¥–ª—è –≤–Ω–µ—Å–µ–Ω–∏—è –∑–∞–ª–æ–≥–æ–≤
   - API –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å—Ç–∞–≤–æ–∫
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞—É–∫—Ü–∏–æ–Ω–æ–≤
   - –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ–± –æ–ø–ª–∞—Ç–µ

2. **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è**:
   - –ì–∞–ª–æ—á–∫–∞ "–í—ã–¥–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—é"
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

3. **NFT-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**:
   - –ú–∏–Ω—Ç–∏–Ω–≥ NFT –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Metaplex

4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**:
   - –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–∞–∂ –∞–≤—Ç–æ—Ä–∞
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤

5. **–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–∞**:
   - –ì–∞–ª–æ—á–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Ç–æ–≤–∞—Ä–∞"
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

6. **–†–µ–π—Ç–∏–Ω–≥ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤**:
   - –†–µ–π—Ç–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–∑—ã–≤–æ–≤ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π

7. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏**:
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–æ—Å—Ç–∞–≤–∫–µ
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

8. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫ (–∫–æ—Ä–∑–∏–Ω–∞)**:
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

9. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ**:
   - –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –±–ª–æ–∫—á–µ–π–Ω–µ
- –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –∫–ª–∏–µ–Ω—Ç + —Å–µ—Ä–≤–µ—Ä
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ 

## –°—Ç–∞—Ç—É—Å—ã –∞—É–∫—Ü–∏–æ–Ω–∞

```typescript
enum AuctionStatus {
  DRAFT       // –ß–µ—Ä–Ω–æ–≤–∏–∫
  SCHEDULED   // –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω
  ACTIVE      // –ò–¥–µ—Ç –∞—É–∫—Ü–∏–æ–Ω
  ENDED       // –ó–∞–≤–µ—Ä—à–µ–Ω, –∂–¥–µ—Ç –æ–ø–ª–∞—Ç—ã
  SOLD        // –ü—Ä–æ–¥–∞–Ω
  CANCELLED   // –û—Ç–º–µ–Ω–µ–Ω
  EXPIRED     // –ò—Å—Ç–µ–∫ –±–µ–∑ –æ–ø–ª–∞—Ç—ã
}
``` 