# üì± –û–¢–ß–ï–¢ –û –†–ï–®–ï–ù–ò–ò –ü–†–û–ë–õ–ï–ú–´ –° –ö–ï–®–ò–†–û–í–ê–ù–ò–ï–ú SERVICE WORKER

## üìÖ –î–∞—Ç–∞: 1 –∏—é–ª—è 2025
## üéØ –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é —Å 5 –∫–Ω–æ–ø–∫–∞–º–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

---

## üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´

### **–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –¥–æ —Å–∏—Ö –ø–æ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å 5 –∫–Ω–æ–ø–∫–∞–º–∏, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –º—ã –æ–±–Ω–æ–≤–∏–ª–∏ BottomNav –¥–æ 4 –∫–Ω–æ–ø–æ–∫.

### **–ü—Ä–∏—á–∏–Ω–∞:**
Service Worker –∫–µ—à–∏—Ä–æ–≤–∞–ª —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª –∫–µ—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- Service Worker –≤–µ—Ä—Å–∏–∏ v8 –∫–µ—à–∏—Ä–æ–≤–∞–ª —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã
- –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ö–µ—à –Ω–µ –æ—á–∏—â–∞–ª—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏

---

## üõ†Ô∏è –†–ï–®–ï–ù–ò–ï

### **1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Service Worker –¥–æ –≤–µ—Ä—Å–∏–∏ v9**

**–§–∞–π–ª**: `public/sw.js`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
```javascript
// –ë—ã–ª–æ
const SW_VERSION = 'v8-20250701-visible';
const CACHE_NAME = 'fonana-v8';
const RUNTIME_CACHE = 'fonana-runtime-v8';

// –°—Ç–∞–ª–æ
const SW_VERSION = 'v9-20250701-mobile-ux';
const CACHE_NAME = 'fonana-v9';
const RUNTIME_CACHE = 'fonana-runtime-v9';
```

### **2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

**–§–∞–π–ª**: `public/force-update-sw.js`
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Service Worker –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫–µ—à–µ–π

```javascript
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º Service Worker
navigator.serviceWorker.getRegistrations().then(function(registrations) {
  for(let registration of registrations) {
    registration.update();
    console.log('[Force Update] Service Worker update triggered');
  }
});

// –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π Service Worker —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
navigator.serviceWorker.register('/sw.js', { updateViaCache: 'none' })
```

### **3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ layout.tsx**

**–§–∞–π–ª**: `app/layout.tsx`
**–î–æ–±–∞–≤–ª–µ–Ω–æ**:
```html
{/* Force Service Worker update */}
<script src="/force-update-sw.js?v=1751398579000" />
```

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

### **–î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ:**
- **–í–µ—Ä—Å–∏—è**: 20250701-125832-1a86243
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- **PM2**: –û–±–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ (fonana, fonana-ws) online
- **–ü–æ—Ä—Ç—ã**: 3000 –∏ 3002 –∞–∫—Ç–∏–≤–Ω—ã

### **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
1. ‚úÖ Service Worker –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ –≤–µ—Ä—Å–∏–∏ v9
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
3. ‚úÖ –ö–µ—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
4. ‚úÖ –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é

---

## üîÑ –ú–ï–•–ê–ù–ò–ó–ú –†–ê–ë–û–¢–´

### **–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
1. –°–∫—Ä–∏–ø—Ç `force-update-sw.js` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
2. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç Service Worker
3. –û—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –∫–µ—à–∏
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### **Service Worker v9:**
- –ù–æ–≤—ã–µ –∏–º–µ–Ω–∞ –∫–µ—à–µ–π: `fonana-v9`, `fonana-runtime-v9`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∫–µ—à–µ–π
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏

---

## üì± –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø

### **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:**
1. **–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞**: Ctrl+Shift+R (–∏–ª–∏ Cmd+Shift+R –Ω–∞ Mac)
2. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞**: Ctrl+F5
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ**: –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ

### **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Service Worker
ssh -p 43988 root@69.10.59.234 "pm2 status"

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
ssh -p 43988 root@69.10.59.234 "pm2 logs fonana --lines 50"

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç
ssh -p 43988 root@69.10.59.234 "pm2 restart fonana"
```

---

## üéØ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

### **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ Service Worker –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ –≤–µ—Ä—Å–∏–∏ v9
- ‚úÖ –ú–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã —Å—Ç–∞–±–∏–ª—å–Ω—ã
- ‚úÖ –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS

### **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é —Å 4 –∫–Ω–æ–ø–∫–∞–º–∏
- Messages –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
- –ö–Ω–æ–ø–∫–∞ "Connect Wallet" –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üìù –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

### **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
1. `public/sw.js` - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ –≤–µ—Ä—Å–∏–∏ v9
2. `public/force-update-sw.js` - –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
3. `app/layout.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### **–°–≤—è–∑–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã:**
- `MOBILE_UX_AUDIT_REPORT.md` - –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
- `MOBILE_UX_OPUS_INSTRUCTIONS.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- `MOBILE_UX_ACTION_PLAN.md` - –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π
- `MOBILE_UX_IMPLEMENTATION_REPORT.md` - –æ—Ç—á–µ—Ç –æ –≤–Ω–µ–¥—Ä–µ–Ω–∏–∏

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ï–®–ï–ù–û  
**–î–∞—Ç–∞ —Ä–µ—à–µ–Ω–∏—è**: 1 –∏—é–ª—è 2025  
**–í–µ—Ä—Å–∏—è**: 20250701-125832-1a86243  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: Claude Opus 4 