# üö® –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—é –±–µ–ª–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –Ω–∞ Fonana

## –ü—Ä–æ–±–ª–µ–º–∞
–ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω —Å –æ—à–∏–±–∫–∞–º–∏ 400 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (.css, .js).

## –ü—Ä–∏—á–∏–Ω—ã
1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Node.js** - —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ —É–±–∏–≤–∞—é—Ç—Å—è, —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π
2. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ buildId** - –±—Ä–∞—É–∑–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏
3. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - nginx/–±—Ä–∞—É–∑–µ—Ä –∫–µ—à–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ HTML

## –°–∏–º–ø—Ç–æ–º—ã
```
Failed to load resource: the server responded with a status of 400 ()
webpack-[hash].js - 400 error
layout-[hash].js - 400 error
[hash].css - 400 error
```

## –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh -p 43988 root@69.10.59.234
cd /var/www/fonana
chmod +x scripts/fix-white-screen.sh
./scripts/fix-white-screen.sh
```

### –í –±—Ä–∞—É–∑–µ—Ä–µ:
1. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à: `Ctrl+Shift+R` (Windows) –∏–ª–∏ `Cmd+Shift+R` (Mac)
2. –û—Ç–∫—Ä—ã—Ç—å –≤ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ —Ä–µ–∂–∏–º–µ
3. –ü–æ–¥–æ–∂–¥–∞—Ç—å 1-2 –º–∏–Ω—É—Ç—ã

## –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –≤ –±—É–¥—É—â–µ–º

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π —Å–∫—Ä–∏–ø—Ç
```bash
./deploy-to-production.sh
```
–ù–ï –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –¥–µ–ø–ª–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥!

### 2. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
```bash
ssh -p 43988 root@69.10.59.234 "ps aux | grep -E 'node|next' | grep -v grep"
```
–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ - –∑–∞–ø—É—Å—Ç–∏—Ç–µ fix-white-screen.sh

### 3. –£–ª—É—á—à–µ–Ω–Ω—ã–π deploy —Å–∫—Ä–∏–ø—Ç
–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ deploy-to-production.sh:
```bash
# –£–±–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
echo "üßπ Cleaning up old processes..."
ssh -p 43988 root@69.10.59.234 "pm2 stop fonana 2>/dev/null || true"
ssh -p 43988 root@69.10.59.234 "killall -9 node next-server 2>/dev/null || true"
sleep 2
```

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ:
```bash
ssh -p 43988 root@69.10.59.234 "pm2 status"
```
–î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù –ø—Ä–æ—Ü–µ—Å—Å fonana!

## –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å buildId –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh -p 43988 root@69.10.59.234 "cat /var/www/fonana/.next/BUILD_ID"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–æ–π buildId –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä:
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network ‚Üí –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤:
```bash
ssh -p 43988 root@69.10.59.234 "ls -la /var/www/fonana/.next/static/chunks/"
```

## –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (TODO)

1. **–î–æ–±–∞–≤–∏—Ç—å health check –≤ nginx:**
```nginx
location /health {
    access_log off;
    return 200 "healthy\n";
    add_header Content-Type text/plain;
}
```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PM2 cluster mode:**
```bash
pm2 start npm --name fonana -i max -- start
```

3. **–î–æ–±–∞–≤–∏—Ç—å graceful shutdown:**
```javascript
process.on('SIGTERM', () => {
  console.log('SIGTERM signal received: closing HTTP server')
  server.close(() => {
    console.log('HTTP server closed')
  })
})
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏
- Telegram: @your_telegram
- Email: support@fonana.me

---
–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 20 –∏—é–Ω—è 2025 